"use client"
import React, { useEffect, useState } from 'react'

import dynamic from "next/dynamic";
const SideBare = dynamic(() => import("../AdminSidebar/page"));
import "../AdminClientNotBid/bt.css"
import axios from 'axios'


const ListClientCan_t_Bid = () => {
const [data, setData]=useState<[]>([])
const[refrech,setRefrech]=useState(false)


useEffect(() => {
  axios
    .get('http://127.0.0.1:5000/dash/cantBid')
    .then((res) => {
      const Data: [] = res.data;
      setData(Data);
    })
    .catch((err) => {
      console.log(err);
    });
}, [refrech]);
const delet = async (id: number) => {
  try {
    // Ask for confirmation before deleting
    const confirmDelete = window.confirm("Are you sure you want to delete this client?");
    
    if (confirmDelete) {
      await axios.delete(`http://127.0.0.1:5000/dash/remove/${id}`);
      setRefrech(!refrech);
    } else {
      console.log("Deletion canceled.");
    }
  } catch (err) {
    console.log(err);
  }
};
// const delet = async (id:number) => {
//   try {
//     await axios.delete(`http://127.0.0.1:5000/dash/remove/${id}`);
//     setRefrech(!refrech);
//   } catch (err) {
//     console.log(err);
//   }
// };
  return (
    <div  className="flex-row lg:flex">
    <SideBare/>
    <div className="container mx-auto mt-4 lg:mt-12 overflow-y-auto">
    <div className="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded">
        <div className="rounded-t mb-0 px-4 py-3 border-0">
          <div className="flex flex-wrap items-center">
            <div className="relative w-full px-4 max-w-full flex-grow flex-1">
              <h3 className="font-semibold text-base text-blueGray-700">
            client can't bid 
              </h3>
            </div>
          </div>
        </div>
        <div className="block w-full overflow-x-auto">
          {/*table 2 */}
<div className="container">

	<table className="text-left w-full">
		<thead className="bg-black flex text-white w-full">
			<tr className="flex w-full mb-4">
				<th className="p-4 w-1/4">client name</th>
				<th className="p-4 w-1/4"> last Name </th>
				<th className="p-4 w-1/4">email</th>
				<th className="p-4 w-1/4">address</th>
        <th className="p-4 w-1/4">cin number</th>
        <th className="p-4 w-1/4">tel number</th>
        <th className="p-4 w-1/4"> </th>
        
			</tr>
		</thead>
		<tbody className="bg-grey-light flex flex-col items-center  overflow-y-scroll w-full" style={{"height": "72vh"}}>
    {data.map((el=>(
			<tr className="flex w-full mb-4">
				<td className="p-4 w-1/4">{el.name} </td>
				<td className="p-4 w-1/4">{el.lastName}</td>
				<td className="p-4 w-1/4">{el.email}</td>
				<td className="p-4 w-1/4">{el.address}</td>
        <td className="p-4 w-1/4">{el.cinNum}</td>
        <td className="p-4 w-1/4">{el.telNumb}</td>
        <td className="p-4 w-1/4"> <button className="btn" onClick={()=>{delet(el.id)}}>
  <svg viewBox="0 0 15 17.5" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" className="icon">
  <path transform="translate(-2.5 -1.25)" d="M15,18.75H5A1.251,1.251,0,0,1,3.75,17.5V5H2.5V3.75h15V5H16.25V17.5A1.251,1.251,0,0,1,15,18.75ZM5,5V17.5H15V5Zm7.5,10H11.25V7.5H12.5V15ZM8.75,15H7.5V7.5H8.75V15ZM12.5,2.5h-5V1.25h5V2.5Z" id="Fill"></path>
</svg>
</button>
           </td>
			</tr>
      )))}
		</tbody>
	</table>
</div>
          {/* Projects table */}
          {/* <table className="items-center w-full bg-transparent border-collapse">
            <thead>
              <tr>
                <th className="px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">
                  client name
                </th>
                <th className="px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">
                  last Name 
                </th>
                <th className="px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">
                  email
                </th>
                <th className="px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">
                  address
                </th>
                <th className="px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">
                  cin number
                </th>
                <th className="px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">
                tel number
                </th>
                <th className="px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">
                 
                </th>
                <th className="px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left">
                 
                </th>
              </tr>
            </thead>
        
            {data.map((el=>(
            <tbody>
              <tr>
                <th className="border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                 {el.name} 
                </th>
                <td className="border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                {el.lastName}
                </td>
                <td className="border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                  {el.email}
                </td>
                <td className="border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                  <i className="fas fa-arrow-up text-emerald-500 mr-4"></i>
                  {el.address}
                </td>
                <td className="border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                  <i className="fas fa-arrow-up text-emerald-500 mr-4"></i>
                  {el.cinNum}
                </td>
                <td className="border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                  <i className="fas fa-arrow-up text-emerald-500 mr-4"></i>
                 {el.telNumb}
                </td>
                <td className="border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                  <i className="fas fa-arrow-up text-emerald-500 mr-4"></i>
                  <button className="btn" onClick={()=>{delet(el.id)}}>
  <svg viewBox="0 0 15 17.5" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" className="icon">
  <path transform="translate(-2.5 -1.25)" d="M15,18.75H5A1.251,1.251,0,0,1,3.75,17.5V5H2.5V3.75h15V5H16.25V17.5A1.251,1.251,0,0,1,15,18.75ZM5,5V17.5H15V5Zm7.5,10H11.25V7.5H12.5V15ZM8.75,15H7.5V7.5H8.75V15ZM12.5,2.5h-5V1.25h5V2.5Z" id="Fill"></path>
</svg>
</button>
                </td>
      
              </tr>
            </tbody>
            )))}
          </table> */}
            
        </div>
      </div>
       </div>
       </div>
  )
}

export default ListClientCan_t_Bid
